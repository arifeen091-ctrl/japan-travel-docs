<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶â‡¶¶‡ßÄ‡¶Ø‡¶º‡¶Æ‡¶æ‡¶® ‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡¶•‡ßá ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Noto+Sans+Bengali:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #ffc107;
            --background-color: #f0f4f8;
            --card-background: #ffffff;
            --text-color: #333;
            --success-color: #28a745;
            --level-up-color: #6f42c1;
        }

        body {
            font-family: 'Noto Sans Bengali', 'Roboto', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .game-container {
            width: 100%;
            max-width: 700px;
            background-color: var(--card-background);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 40px;
            text-align: center;
            box-sizing: border-box;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        h2 {
            font-size: 1.8em;
            color: var(--text-color);
            margin-top: 20px;
            margin-bottom: 10px;
        }

        p {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .progress-bar-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 10px;
            height: 20px;
            margin: 20px 0;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--success-color);
            transition: width 0.5s ease-in-out;
            border-radius: 10px;
        }

        .task-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
            text-align: left;
        }

        .task-item {
            display: flex;
            align-items: center;
            background-color: var(--background-color);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            transition: background-color 0.3s ease-in-out;
            border: 1px solid #dee2e6;
        }

        .task-item.completed {
            background-color: #d4edda;
        }

        .task-text {
            flex-grow: 1;
            font-size: 1.1em;
            margin-left: 15px;
            color: #555;
        }

        .complete-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            background-color: var(--primary-color);
            color: #fff;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .complete-button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        .complete-button:disabled {
            background-color: #ced4da;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .ai-button {
            background-color: #f06292; /* A nice pink for the AI button */
            font-weight: bold;
        }

        #next-level-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            background: linear-gradient(45deg, var(--level-up-color), var(--primary-color));
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: none; /* Initially hidden */
            margin-top: 20px;
        }

        #next-level-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        #victory-screen {
            display: none;
            padding: 40px;
        }

        #victory-screen h2 {
            color: var(--success-color);
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        #victory-screen .home-run-gif {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }

        #victory-screen .visa-icon {
            font-size: 100px;
            margin-bottom: 20px;
            color: #0d6efd; /* A nice blue color for the visa icon */
        }

        .notification-modal, .ai-modal, .dynamic-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--card-background);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 400px;
            animation: fadeInScale 0.3s ease-out;
            position: relative;
        }
        
        .close-modal-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }
        
        .close-modal-btn:hover,
        .close-modal-btn:focus {
            color: #000;
            text-decoration: none;
        }
        
        .modal-content h3 {
            margin-top: 0;
            color: var(--primary-color);
        }
        
        .modal-content p {
            margin-bottom: 20px;
        }

        .ai-modal .modal-content, .dynamic-modal .modal-content {
            max-width: 600px;
            text-align: left;
        }

        #itinerary-prompt-input {
            width: calc(100% - 20px);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 15px;
        }
        
        .ai-response-area {
            background-color: var(--background-color);
            padding: 15px;
            border-radius: 10px;
            min-height: 150px;
            white-space: pre-wrap;
            overflow-y: auto;
            border: 1px dashed #bbb;
            margin-top: 15px;
        }
        
        .modal-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .loading-indicator {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .footnote-container {
            margin-top: 30px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 10px;
            font-size: 0.9em;
            line-height: 1.4;
            color: #666;
            text-align: left;
        }
        .copy-button {
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color: 0.3s;
        }

        .copy-button:hover {
            background-color: #5a6268;
        }

        /* Styles for the intro form */
        #intro-form {
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }
        #intro-form input[type="text"], #intro-form input[type="email"] {
            display: block;
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            box-sizing: border-box;
        }
        #intro-form button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            background-color: var(--primary-color);
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #intro-form button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<div class="game-container" id="game-container">
    <div id="intro-form">
        <h1>‡¶â‡¶¶‡ßÄ‡¶Ø‡¶º‡¶Æ‡¶æ‡¶® ‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡¶•‡ßá ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ</h1>
        <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶∏‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡ßá‡¶û‡ßç‡¶ö‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        <!-- Removed action and method attributes to prevent page reload -->
        <form id="user-info-form" action="https://formspree.io/f/xkgvwepz" method="POST">
            <input type="text" name="name" id="user-name" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" required>
            <input type="email" name="email" id="user-email" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶≤" required>
            <div style="margin-bottom: 15px; text-align: left;">
                <input type="checkbox" id="consent-checkbox" name="consent" required>
                <label for="consent-checkbox">‡¶Ü‡¶Æ‡¶ø ‡¶∏‡¶Æ‡ßç‡¶Æ‡¶§‡¶ø ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø ‡¶Ø‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ ‡¶π‡ßã‡¶ï‡•§</label>
            </div>
            <button type="submit">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </form>
    </div>

    <div id="game-main" style="display:none;">
        <h1>‡¶â‡¶¶‡ßÄ‡¶Ø‡¶º‡¶Æ‡¶æ‡¶® ‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡¶•‡ßá ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ</h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
        </div>
        <div id="level-screen">
            <h2 id="level-title"></h2>
            <p id="level-description"></p>
            <ul class="task-list" id="task-list"></ul>
            <button id="next-level-btn" class="next-level-button">‡¶™‡¶∞‡ßá‡¶∞ ‡¶ß‡¶æ‡¶™!</button>
            <div class="modal-buttons">
              <button id="dynamic-btn-1" class="complete-button ai-button">‚ú®</button>
              <button id="dynamic-btn-2" class="complete-button ai-button">‚ú®</button>
            </div>
        </div>
        <div id="victory-screen" style="display:none;">
            <h2>‡¶π‡ßã‡¶Æ ‡¶∞‡¶æ‡¶®! ‡¶≠‡¶ø‡¶∏‡¶æ ‡¶π‡¶æ‡¶§‡ßá!</h2>
            <span class="visa-icon">üáØüáµ‚úîÔ∏è</span>
            <p>‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶≠‡¶ø‡¶∏‡¶æ ‡¶™‡ßá‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶â‡¶¶‡ßÄ‡¶Ø‡¶º‡¶Æ‡¶æ‡¶® ‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡¶•‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£!</p>
            <img src="https://placehold.co/400x300/F0F4F8/333?text=Passport+with+Visa" alt="‡¶≠‡¶ø‡¶∏‡¶æ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™ ‡¶∏‡¶π ‡¶™‡¶æ‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü" class="home-run-gif">
        </div>
        <div class="footnote-container" id="footnote-container"></div>
    </div>
</div>

<!-- General Notification Modal -->
<div id="notification-modal" class="notification-modal">
    <div class="modal-content">
        <span id="close-notification-btn" class="close-modal-btn">&times;</span>
        <h3 id="modal-title"></h3>
        <p id="modal-message"></p>
    </div>
</div>

<!-- Gemini AI Modal for Itinerary Generation -->
<div id="ai-modal" class="ai-modal">
    <div class="modal-content">
        <span id="close-ai-btn" class="close-modal-btn">&times;</span>
        <h3>‚ú® AI-‡¶ö‡¶æ‡¶≤‡¶ø‡¶§ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡¶∞</h3>
        <p style="margin-top: -10px; color: #dc3545; font-weight: bold;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ‡ßü ‡¶è‡¶á ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        <p>‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶ï‡ßá‡¶Æ‡¶® ‡¶ü‡ßç‡¶∞‡¶ø‡¶™ ‡¶ö‡¶æ‡¶® ‡¶ú‡ßá‡¶Æ‡¶ø‡¶®‡¶ø‡¶ï‡ßá ‡¶¨‡¶≤‡ßÅ‡¶®:</p>
        <input type="text" id="itinerary-prompt-input" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®, '‡¶ü‡ßã‡¶ï‡¶ø‡¶ì ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶ø‡ßü‡ßã‡¶ü‡ßã‡¶§‡ßá ‡ß≠ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶´‡ßÅ‡¶°‡¶ø ‡¶ü‡ßç‡¶∞‡¶ø‡¶™' ‡¶¨‡¶æ '‡¶Æ‡¶®‡ßç‡¶¶‡¶ø‡¶∞ ‡¶ì ‡¶™‡ßç‡¶∞‡¶ï‡ßÉ‡¶§‡¶ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡ßß‡ß¶ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶ü‡ßç‡¶∞‡¶ø‡¶™'">
        <button class="complete-button" id="generate-itinerary-btn">‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <div class="loading-indicator" id="loading-indicator-ai">
            <div class="spinner"></div>
            <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        </div>
        <div id="ai-response-area" class="ai-response-area"></div>
        <button class="copy-button" id="copy-itinerary-btn" style="display:none;">‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <button class="complete-button" id="complete-itinerary-btn" style="display: none; margin-top: 20px;">‡¶ï‡¶æ‡¶ú ‡¶∂‡ßá‡¶∑</button>
    </div>
</div>

<!-- Dynamic Gemini Modal -->
<div id="dynamic-modal" class="dynamic-modal">
    <div class="modal-content">
        <span id="close-dynamic-btn" class="close-modal-btn">&times;</span>
        <h3 id="dynamic-modal-title"></h3>
        <p style="margin-top: -10px; color: #dc3545; font-weight: bold;">‡¶è‡¶á ‡¶§‡¶•‡ßç‡¶Ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ‡ßü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶Æ‡ßá‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        <div id="dynamic-response-area" class="ai-response-area"></div>
        <div class="loading-indicator" id="loading-indicator-dynamic">
            <div class="spinner"></div>
            <p id="loading-message-dynamic"></p>
        </div>
        <button class="copy-button" id="copy-dynamic-btn" style="display:none;">‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
</div>

<script>
    // Game State and Data
    const levels = [
        {
            id: 1,
            title: "Level 1: ‡¶Ö‡¶≠‡¶ø‡¶Ø‡¶æ‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ - ‡¶™‡¶æ‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á",
            description: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶•‡¶ø ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶æ‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü‡•§ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶ü‡¶ø ‡¶¨‡ßà‡¶ß ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡•§",
            tasks: [
                { text: "‡¶™‡¶æ‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡ß¨ ‡¶Æ‡¶æ‡¶∏ ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", isCompleted: false },
                { text: "‡¶≠‡¶ø‡¶∏‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", isCompleted: false }
            ],
            taskCompleteMessages: [
                "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ‡¶∞ ‡¶è‡¶ï ‡¶ß‡¶æ‡¶™ ‡¶ï‡¶æ‡¶õ‡¶æ‡¶ï‡¶æ‡¶õ‡¶ø! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶æ‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¶‡ßÅ‡¶∞‡ßç‡¶¶‡¶æ‡¶®‡ßç‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡ßá‡¶û‡ßç‡¶ö‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡•§",
                "‡¶Ü‡¶∞‡ßá‡¶ï‡¶ü‡¶ø ‡¶ï‡¶æ‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶æ‡¶Æ‡ßÅ‡¶∞‡¶æ‡¶á ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßÅ‡¶∂‡¶ø‡¶∞ ‡¶¶‡ßá‡¶∂‡ßá ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶®‡•§"
            ],
            levelUpMessage: "‡¶™‡¶æ‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶´‡ßÅ‡¶ú‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶Ü‡¶∞ ‡¶è‡¶ï ‡¶ß‡¶æ‡¶™ ‡¶¨‡¶æ‡¶ï‡¶ø‡•§ ‡¶™‡¶∞‡ßá‡¶∞ ‡¶ß‡¶æ‡¶™‡ßá ‡¶Ø‡¶æ‡¶®!"
        },
        {
            id: 2,
            title: "Level 2: ‡¶ó‡ßÅ‡¶™‡ßç‡¶§‡¶ß‡¶®‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶®‡¶ö‡¶ø‡¶§‡ßç‡¶∞ - ‡¶®‡¶•‡¶ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π",
            description: "‡¶è‡¶ü‡¶ø ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶ï‡¶æ‡¶ó‡¶ú‡¶™‡¶§‡ßç‡¶∞ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡•§ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶®‡¶•‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶õ‡ßã‡¶ü ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶®‡•§",
            tasks: [
                { text: "‡ß® ‡¶ï‡¶™‡¶ø ‡¶∏‡¶¶‡ßç‡¶Ø ‡¶§‡ßã‡¶≤‡¶æ ‡¶õ‡¶¨‡¶ø (‡ß®‚Äùx ‡ß®‚Äù ‡¶∏‡¶æ‡¶á‡¶ú) ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", isCompleted: false },
                { text: "‡¶≠‡¶ø‡¶∏‡¶æ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", isCompleted: false },
                { 
                    text: "‡¶è‡¶Ø‡¶º‡¶æ‡¶∞‡¶ü‡¶ø‡¶ï‡ßá‡¶ü ‡¶¨‡ßÅ‡¶ï‡¶ø‡¶Ç ‡¶ï‡¶™‡¶ø ‡¶ì ‡¶π‡ßã‡¶ü‡ßá‡¶≤ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶® ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", 
                    isCompleted: false,
                    infoAction: {
                        label: 'Call HIS',
                        message: 'HIS Travel Mobile number : +88-01511447322'
                    }
                },
                { text: "H.I.S. Travel-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶∏‡ßÇ‡¶ö‡¶ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‚ú®", isCompleted: false, specialAction: 'generateItinerary' }
            ],
            taskCompleteMessages: [
                "‡¶®‡¶•‡¶ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ö‡ßá‡¶∞‡¶ø ‡¶¨‡ßç‡¶≤‡¶∏‡¶Æ‡¶∏ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶è‡¶ï ‡¶ß‡¶æ‡¶™ ‡¶ï‡¶æ‡¶õ‡¶æ‡¶ï‡¶æ‡¶õ‡¶ø‡•§",
                "‡¶´‡¶∞‡ßç‡¶Æ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡¶• ‡¶è‡¶ñ‡¶® ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞‡•§",
                "‡¶Ö‡¶∞‡ßç‡¶•‡¶®‡ßà‡¶§‡¶ø‡¶ï ‡¶®‡¶•‡¶ø ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶è‡¶ñ‡¶® ‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø‡¶∂‡ßÄ‡¶≤‡¶§‡¶æ‡¶∞ ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶ö‡¶æ‡¶≤‡¶ø‡¶§‡•§",
                "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ ‡¶è‡¶ñ‡¶® ‡¶®‡¶ø‡¶ñ‡ßÅ‡¶Å‡¶§! ‡¶è‡¶ü‡¶ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡•§"
            ],
            levelUpMessage: "‡¶ï‡¶æ‡¶ó‡¶ú‡¶™‡¶§‡ßç‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∂‡¶ø Shibuya Crossing-‡¶è‡¶∞ ‡¶ï‡ßã‡¶≤‡¶æ‡¶π‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶è‡¶ï ‡¶ß‡¶æ‡¶™ ‡¶ï‡¶æ‡¶õ‡¶æ‡¶ï‡¶æ‡¶õ‡¶ø‡•§ ‡¶™‡¶∞‡ßá‡¶∞ ‡¶ß‡¶æ‡¶™‡ßá ‡¶Ø‡¶æ‡¶®!"
        },
        {
            id: 3,
            title: "Level 3: ‡¶Ö‡¶≠‡¶ø‡¶≠‡¶æ‡¶¨‡¶ï‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® - ‡¶ï‡¶∞‡ßç‡¶Æ‡¶∏‡¶Ç‡¶∏‡ßç‡¶•‡¶æ‡¶®/‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡¶æ‡ßü‡¶ø‡¶ï ‡¶®‡¶•‡¶ø",
            description: "‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡ßá‡¶∞ ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá‡¶á ‡¶Ü‡¶™‡¶®‡¶ø ‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£ ‡¶ï‡¶∞‡ßá‡¶® ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ï‡¶ú‡¶® ‡¶¶‡¶æ‡¶Ø‡¶º‡¶ø‡¶§‡ßç‡¶¨‡¶∂‡ßÄ‡¶≤ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶ï‡¶æ‡¶∞‡ßÄ‡•§",
            tasks: [
                { text: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßá‡¶∂‡¶æ‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶ï‡¶æ‡¶ó‡¶ú‡¶™‡¶§‡ßç‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶® (NOC/‡¶ü‡ßç‡¶∞‡ßá‡¶° ‡¶≤‡¶æ‡¶á‡¶∏‡ßá‡¶®‡ßç‡¶∏/‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø)‡•§", isCompleted: false },
                { text: "‡¶Ü‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£‡¶™‡¶§‡ßç‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶ó‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶®‡ßç‡¶ü‡¶ø ‡¶≤‡ßá‡¶ü‡¶æ‡¶∞ (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá) ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®‡•§", isCompleted: false }
            ],
            taskCompleteMessages: [
                "‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶≠‡¶ø‡¶≠‡¶æ‡¶¨‡¶ï‡ßá‡¶∞ ‡¶Ü‡¶∂‡ßÄ‡¶∞‡ßç‡¶¨‡¶æ‡¶¶ ‡¶Ü‡¶õ‡ßá‡•§",
                "‡¶Ü‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£‡¶™‡¶§‡ßç‡¶∞ ‡¶π‡¶æ‡¶§‡ßá ‡¶Ü‡¶õ‡ßá! ‡¶™‡¶• ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶Ü‡¶õ‡ßá‡•§"
            ],
            levelUpMessage: "‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø‡¶Ø‡¶º‡ßã‡¶ü‡ßã‡¶∞ ‡¶Æ‡¶®‡ßç‡¶¶‡¶ø‡¶∞‡ßá‡¶∞ ‡¶∂‡¶æ‡¶®‡ßç‡¶§ ‡¶∏‡ßå‡¶®‡ßç‡¶¶‡¶∞‡ßç‡¶Ø ‡¶Ö‡¶®‡ßÅ‡¶≠‡¶¨ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶è‡¶ï ‡¶ß‡¶æ‡¶™ ‡¶ï‡¶æ‡¶õ‡¶æ‡¶ï‡¶æ‡¶õ‡¶ø‡•§ ‡¶™‡¶∞‡ßá‡¶∞ ‡¶ß‡¶æ‡¶™‡ßá ‡¶Ø‡¶æ‡¶®!"
        },
        {
            id: 4,
            title: "Level 4: ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ - ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ú‡¶Æ‡¶æ",
            description: "‡¶¨‡¶°‡¶º ‡¶¶‡¶ø‡¶®‡¶ü‡¶ø ‡¶è‡¶∏‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶≠‡¶ø‡¶è‡¶´‡¶è‡¶∏ ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡•§",
            tasks: [
                { text: "‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ñ‡¶∞‡¶ö‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶ï‡¶æ‡¶ó‡¶ú‡¶™‡¶§‡ßç‡¶∞ (‡¶ü‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏-‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶ü ‡¶ì ‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï ‡¶∏‡ßç‡¶ü‡ßá‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü) ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®‡•§", isCompleted: false },
                { 
                    text: "H.I.S. Travel-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶®‡¶•‡¶ø ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", 
                    isCompleted: false,
                    infoAction: {
                        label: 'Call HIS',
                        message: 'HIS Travel Mobile number : +88-01511447322'
                    }
                },
                { text: "‡¶≠‡¶ø‡¶è‡¶´‡¶è‡¶∏ ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡ßá ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡¶™‡¶§‡ßç‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®‡•§", isCompleted: false }
            ],
            taskCompleteMessages: [
                "‡¶®‡¶•‡¶ø ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶è‡¶ñ‡¶® ‡¶ï‡ßã‡¶® ‡¶ï‡¶æ‡¶ó‡¶ú‡¶™‡¶§‡ßç‡¶∞ ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶•‡¶æ‡¶Æ‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ‡•§",
                "‡¶ö‡ßá‡¶ï‡¶≤‡¶ø‡¶∏‡ßç‡¶ü H.I.S. Travel-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶‡•§",
                "‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶¨‡¶∏‡¶ï‡ßá ‡¶Æ‡ßã‡¶ï‡¶æ‡¶¨‡¶ø‡¶≤‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§"
            ],
            levelUpMessage: "‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶∞‡¶æ‡¶Ø‡¶º ‡¶Ü‡¶∏‡¶õ‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ü‡ßã‡¶ï‡¶ø‡¶ì‡¶∞ ‡¶®‡¶ø‡¶Ø‡¶º‡¶® ‡¶∏‡¶ø‡¶ü‡¶ø‡¶∞ ‡¶ñ‡ßÅ‡¶¨ ‡¶ï‡¶æ‡¶õ‡¶æ‡¶ï‡¶æ‡¶õ‡¶ø‡•§ ‡¶™‡¶∞‡ßá‡¶∞ ‡¶ß‡¶æ‡¶™‡ßá ‡¶Ø‡¶æ‡¶®!"
        },
        {
            id: 5,
            title: "Level 5: ‡¶¶‡ßÇ‡¶§‡¶æ‡¶¨‡¶æ‡¶∏‡ßá‡¶∞ ‡¶∞‡¶æ‡¶Ø‡¶º",
            description: "‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ñ‡ßá‡¶≤‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶¶‡ßÇ‡¶§‡¶æ‡¶¨‡¶æ‡¶∏ ‡¶è‡¶ñ‡¶® ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡¶õ‡ßá‡•§ ‡¶ß‡ßà‡¶∞‡ßç‡¶Ø ‡¶ß‡¶∞‡ßÅ‡¶®!",
            tasks: [
                { text: "‚Äò‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‚Äô ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", isCompleted: false },
            ],
            taskCompleteMessages: [
                "‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶™‡ßÅ‡¶∞‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡•§"
            ],
            levelUpMessage: "‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶∞‡¶æ‡¶Ø‡¶º ‡¶è‡¶∏‡ßá‡¶õ‡ßá! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§ ‡¶â‡¶¶‡ßÄ‡¶Ø‡¶º‡¶Æ‡¶æ‡¶® ‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡¶•‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶π‡ßã‡¶®!"
        }
    ];

    const geminiFeatures = [
        {
            title1: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡ßÉ‡¶§‡¶ø",
            prompt1: "5‡¶ü‡¶ø ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶∏‡¶æ‡¶Ç‡¶∏‡ßç‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ ‡¶ì ‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡¶æ‡¶ö‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§ ‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Ö‡¶≠‡¶ø‡¶¨‡¶æ‡¶¶‡¶®, ‡¶ú‡ßÅ‡¶§‡¶æ ‡¶™‡¶∞‡¶ø‡¶ß‡¶æ‡¶®, ‡¶è‡¶¨‡¶Ç ‡¶â‡¶™‡¶π‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡•§",
            title2: "‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßÄ‡ßü ‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶≠‡¶æ‡¶∑‡¶æ",
            prompt2: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø 5‡¶ü‡¶ø ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ-‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶¨‡¶æ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Ç‡¶∂ ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶â‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§",
        },
        {
            title1: "‡¶ê‡¶§‡¶ø‡¶π‡ßç‡¶Ø‡¶¨‡¶æ‡¶π‡ßÄ ‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞",
            prompt1: "5‡¶ü‡¶ø ‡¶ú‡¶®‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶è‡¶¨‡¶Ç ‡¶ê‡¶§‡¶ø‡¶π‡ßç‡¶Ø‡¶¨‡¶æ‡¶π‡ßÄ ‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶¶‡¶ø‡¶®‡•§",
            title2: "‡¶ü‡ßã‡¶ï‡¶ø‡¶ì‡¶∞ ‡¶¶‡¶∞‡ßç‡¶∂‡¶®‡ßÄ‡¶Ø‡¶º ‡¶∏‡ßç‡¶•‡¶æ‡¶®",
            prompt2: "‡¶ü‡ßã‡¶ï‡¶ø‡¶ì‡¶∞ 5‡¶ü‡¶ø ‡¶ú‡¶®‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶™‡¶∞‡ßç‡¶Ø‡¶ü‡¶® ‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶¶‡¶ø‡¶®‡•§",
        },
        {
            title1: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶π‡¶®",
            prompt1: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø 5‡¶ü‡¶ø ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡¶∞‡¶ø‡¶¨‡¶π‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡ßÅ‡¶≤‡ßá‡¶ü ‡¶ü‡ßç‡¶∞‡ßá‡¶®, ‡¶∏‡¶æ‡¶¨‡¶ì‡¶Ø‡¶º‡ßá) ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶¶‡¶ø‡¶®‡•§",
            title2: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶ï‡ßá‡¶®‡¶æ‡¶ï‡¶æ‡¶ü‡¶æ",
            prompt2: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶ï‡ßá‡¶®‡¶æ‡¶ï‡¶æ‡¶ü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø 5‡¶ü‡¶ø ‡¶ú‡¶®‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ú‡¶ø‡¶®‡¶ø‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßá‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ï‡ßã‡¶•‡¶æ‡¶Ø‡¶º ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶∏‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§",
        },
        {
            title1: "‡¶≠‡¶ø‡¶∏‡¶æ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡ßá‡¶∞ ‡¶ü‡¶ø‡¶™‡¶∏",
            prompt1: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá‡¶∞ ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü ‡¶≠‡¶ø‡¶∏‡¶æ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø 5‡¶ü‡¶ø ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ü‡¶ø‡¶™‡¶∏ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§",
            title2: "‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø",
            prompt2: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá 5‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶ø‡¶®‡¶ø‡¶∏ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§ ‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç, ‡¶Æ‡ßÅ‡¶¶‡ßç‡¶∞‡¶æ, ‡¶è‡¶¨‡¶Ç ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü‡•§",
        },
        {
            title1: "‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ó‡¶æ‡¶á‡¶°",
            prompt1: "‡¶ú‡¶æ‡¶™‡¶æ‡¶® ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ó‡¶æ‡¶á‡¶° ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",
            title2: "‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó",
            prompt2: "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø 5‡¶ü‡¶ø ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ-‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡¶ø ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶æ‡¶ï‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§",
        }
    ];

    const japanFacts = [
        "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡ß¨,‡ßÆ‡ß¶‡ß¶‡¶ü‡¶ø‡¶∞‡¶ì ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¶‡ßç‡¶¨‡ßÄ‡¶™ ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶ö‡¶æ‡¶∞‡¶ü‡¶ø ‡¶¨‡ßÉ‡¶π‡¶§‡ßç‡¶§‡¶Æ ‡¶¶‡ßç‡¶¨‡ßÄ‡¶™ (‡¶π‡ßã‡¶®‡¶∂‡ßÅ, ‡¶π‡ßã‡¶ï‡ßç‡¶ï‡¶æ‡¶á‡¶°‡ßã, ‡¶ï‡¶ø‡¶Ø‡¶º‡ßÅ‡¶∂‡ßÅ, ‡¶è‡¶¨‡¶Ç ‡¶∂‡¶ø‡¶ï‡ßã‡¶ï‡ßÅ) ‡¶Æ‡ßã‡¶ü ‡¶≠‡ßÇ‡¶Æ‡¶ø‡¶∞ ‡ßØ‡ß≠% ‡¶ú‡ßÅ‡¶°‡¶º‡ßá ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§",
        "‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡ßá‡¶∞ ‡¶¨‡ßÉ‡¶π‡¶§‡ßç‡¶§‡¶Æ ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞, ‡¶∏‡ßÅ‡¶ï‡¶ø‡¶ú‡¶ø ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü, ‡¶ü‡ßã‡¶ï‡¶ø‡¶ì‡¶§‡ßá ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶ø‡¶§, ‡¶Ø‡¶æ ‡ßß‡ßØ‡ß©‡ß´ ‡¶∏‡¶æ‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§",
        "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≠‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶Æ‡ßá‡¶∂‡¶ø‡¶® ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶Ø‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶§‡¶æ‡¶ú‡¶æ ‡¶´‡ßÅ‡¶≤, ‡¶ó‡¶∞‡¶Æ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞, ‡¶è‡¶¨‡¶Ç ‡¶è‡¶Æ‡¶®‡¶ï‡¶ø ‡¶õ‡¶æ‡¶§‡¶æ‡¶ì‡•§",
        "‡¶ö‡ßá‡¶∞‡¶ø ‡¶¨‡ßç‡¶≤‡¶∏‡¶Æ ‡¶¨‡¶æ ‡¶∏‡¶æ‡¶ï‡ßÅ‡¶∞‡¶æ, ‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá‡¶∞ ‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶´‡ßÅ‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ü‡¶ø ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶∏‡ßå‡¶®‡ßç‡¶¶‡¶∞‡ßç‡¶Ø ‡¶ì ‡¶ï‡ßç‡¶∑‡¶£‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ‡¶§‡¶æ‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶§‡ßÄ‡¶ï ‡¶ï‡¶∞‡ßá‡•§",
        "‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡ßá‡¶∞ ‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶™‡ßÅ‡¶∞‡¶æ‡¶®‡ßã ‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø ‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶ø‡¶§‡•§ ‡¶ï‡ßã‡¶Ç‡¶ó‡ßå ‡¶ó‡ßÅ‡¶Æ‡¶ø ‡¶õ‡¶ø‡¶≤ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶Æ‡¶æ‡¶£ ‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø ‡¶Ø‡¶æ ‡ßß,‡ß™‡ß¶‡ß¶ ‡¶¨‡¶õ‡¶∞‡ßá‡¶∞‡¶ì ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶ß‡¶∞‡ßá ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡¶ø‡¶≤‡•§",
        "‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶Ø‡¶º ‡ß≠‡ß¶% ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶™‡¶∞‡ßç‡¶¨‡¶§‡¶Æ‡¶æ‡¶≤‡¶æ, ‡¶Ø‡¶æ ‡¶è‡¶ü‡¶ø ‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶∞‡ßç‡¶Æ‡¶æ‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶®‡ßÅ‡¶™‡¶Ø‡ßã‡¶ó‡ßÄ ‡¶ï‡¶∞‡ßá ‡¶§‡ßã‡¶≤‡ßá, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶è‡¶ü‡¶ø ‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶ï‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶ì ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡•§"
    ];

    let currentLevelIndex = 0;
    const totalLevels = levels.length;
    let userName = '';
    let userEmail = '';

    // DOM Elements
    const introFormDiv = document.getElementById('intro-form');
    const userInfoForm = document.getElementById('user-info-form');
    const gameMainDiv = document.getElementById('game-main');
    const progressBar = document.getElementById('progressBar');
    const levelTitle = document.getElementById('level-title');
    const levelDescription = document.getElementById('level-description');
    const taskList = document.getElementById('task-list');
    const nextLevelBtn = document.getElementById('next-level-btn');
    const victoryScreen = document.getElementById('victory-screen');
    const levelScreen = document.getElementById('level-screen');
    const footnoteContainer = document.getElementById('footnote-container');
    const dynamicBtn1 = document.getElementById('dynamic-btn-1');
    const dynamicBtn2 = document.getElementById('dynamic-btn-2');

    // General Notification Modal Elements
    const notificationModal = document.getElementById('notification-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalMessage = document.getElementById('modal-message');
    const closeNotificationBtn = document.getElementById('close-notification-btn');

    // Gemini AI Modal Elements
    const aiModal = document.getElementById('ai-modal');
    const closeAiBtn = document.getElementById('close-ai-btn');
    const itineraryPromptInput = document.getElementById('itinerary-prompt-input');
    const generateItineraryBtn = document.getElementById('generate-itinerary-btn');
    const loadingIndicatorAI = document.getElementById('loading-indicator-ai');
    const aiResponseArea = document.getElementById('ai-response-area');
    const completeItineraryBtn = document.getElementById('complete-itinerary-btn');
    const copyItineraryBtn = document.getElementById('copy-itinerary-btn');
    
    // Dynamic Modal Elements
    const dynamicModal = document.getElementById('dynamic-modal');
    const closeDynamicBtn = document.getElementById('close-dynamic-btn');
    const dynamicModalTitle = document.getElementById('dynamic-modal-title');
    const dynamicResponseArea = document.getElementById('dynamic-response-area');
    const loadingIndicatorDynamic = document.getElementById('loading-indicator-dynamic');
    const loadingMessageDynamic = document.getElementById('loading-message-dynamic');
    const copyDynamicBtn = document.getElementById('copy-dynamic-btn');


    // Function to update the progress bar
    function updateProgressBar() {
        const completedLevels = levels.filter(level => level.isCompleted).length;
        const overallProgress = (completedLevels / totalLevels) * 100;
        progressBar.style.width = overallProgress + '%';
        
        const currentLevel = levels[currentLevelIndex];
        if (currentLevel) {
            const completedTasks = currentLevel.tasks.filter(task => task.isCompleted).length;
            const levelProgress = (completedTasks / currentLevel.tasks.length) * 100;
            const overallLevelProgress = (completedLevels * (100 / totalLevels)) + (levelProgress / totalLevels);
            progressBar.style.width = overallLevelProgress + '%';
        }
    }

    // Function to display a random fact
    function displayRandomFact() {
        const randomIndex = Math.floor(Math.random() * japanFacts.length);
        footnoteContainer.textContent = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶ú‡¶æ‡¶®‡ßá‡¶®? ${japanFacts[randomIndex]}`;
    }

    // Display a notification message using the custom modal
    function showNotification(title, message) {
        modalTitle.textContent = title;
        modalMessage.textContent = message;
        notificationModal.style.display = 'flex';
    }

    // Close the general notification modal
    function closeNotificationModal() {
        notificationModal.style.display = 'none';
    }

    // Close the Gemini AI modal
    function closeAiModal() {
        aiModal.style.display = 'none';
        itineraryPromptInput.value = '';
        aiResponseArea.textContent = '';
        loadingIndicatorAI.style.display = 'none';
        completeItineraryBtn.style.display = 'none';
        copyItineraryBtn.style.display = 'none';
    }

    // Close the dynamic Gemini modal
    function closeDynamicModal() {
        dynamicModal.style.display = 'none';
        dynamicResponseArea.textContent = '';
        loadingIndicatorDynamic.style.display = 'none';
        copyDynamicBtn.style.display = 'none';
    }


    // Event listeners for closing modals
    closeNotificationBtn.addEventListener('click', closeNotificationModal);
    closeAiBtn.addEventListener('click', closeAiModal);
    closeDynamicBtn.addEventListener('click', closeDynamicModal);
    
    window.onclick = function(event) {
        if (event.target == notificationModal) {
            closeNotificationModal();
        }
        if (event.target == aiModal) {
            closeAiModal();
        }
        if (event.target == dynamicModal) {
            closeDynamicModal();
        }
    }
    
    // Function to handle the dynamic Gemini API call
    async function handleDynamicFeature(prompt, loadingMessage) {
        dynamicModal.style.display = 'flex';
        dynamicModalTitle.textContent = loadingMessage; // Use loading message as title
        loadingIndicatorDynamic.style.display = 'block';
        dynamicResponseArea.textContent = '';
        copyDynamicBtn.style.display = 'none';
        
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        let chatHistory = [];
        chatHistory.push({
            role: "user",
            parts: [{ text: prompt }]
        });
        const payload = { contents: chatHistory };

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                console.error("API error:", errorData);
                throw new Error(`API error: ${response.status}`);
            }

            const result = await response.json();

            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                dynamicResponseArea.textContent = text;
                copyDynamicBtn.style.display = 'block';
            } else {
                dynamicResponseArea.textContent = "‡¶§‡¶•‡ßç‡¶Ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
                console.error("Unexpected API response structure:", result);
            }
        } catch (error) {
            console.error("Error generating dynamic content:", error);
            dynamicResponseArea.textContent = "‡¶è‡¶ï‡¶ü‡¶ø ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
        } finally {
            loadingIndicatorDynamic.style.display = 'none';
        }
    }

    // Function to handle the Gemini API call for itinerary generation
    async function generateItinerary(prompt) {
        loadingIndicatorAI.style.display = 'block';
        generateItineraryBtn.disabled = true;
        aiResponseArea.textContent = '';
        completeItineraryBtn.style.display = 'none';
        copyItineraryBtn.style.display = 'none';
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        let chatHistory = [];
        // Updated prompt to request output in Bangla
        chatHistory.push({
            role: "user",
            parts: [{ text: `‡¶ú‡¶æ‡¶™‡¶æ‡¶®‡ßá ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶∏‡ßÇ‡¶ö‡¶ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶Ø‡¶º‡•§ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶ü‡¶ø ‡¶è‡¶á ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶π‡¶ì‡ßü‡¶æ ‡¶â‡¶ö‡¶ø‡¶§: "${prompt}"‡•§ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡ßç‡¶∞‡¶Æ ‡¶∏‡¶π ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ø‡ßå‡¶ï‡ßç‡¶§‡¶ø‡¶ï ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ‡¶Ø‡¶º ‡¶Æ‡¶®‡ßã‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶®‡•§ ‡¶è‡¶ü‡¶ø ‡ß®‡ß¶‡ß¶ ‡¶∂‡¶¨‡ßç‡¶¶‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§` }]
        });
        const payload = { contents: chatHistory };

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                console.error("API error:", errorData);
                throw new Error(`API error: ${response.status}`);
            }

            const result = await response.json();

            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                aiResponseArea.textContent = text;
                completeItineraryBtn.style.display = 'block';
                copyItineraryBtn.style.display = 'block';
            } else {
                aiResponseArea.textContent = "‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
                console.error("Unexpected API response structure:", result);
            }
        } catch (error) {
            console.error("Error generating itinerary:", error);
            aiResponseArea.textContent = "‡¶è‡¶ï‡¶ü‡¶ø ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
        } finally {
            loadingIndicatorAI.style.display = 'none';
            generateItineraryBtn.disabled = false;
        }
    }
    
    // Event listener for the generate itinerary button
    generateItineraryBtn.addEventListener('click', () => {
        const prompt = itineraryPromptInput.value.trim();
        if (prompt) {
            generateItinerary(prompt);
        } else {
            aiResponseArea.textContent = "‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§";
        }
    });

    // Function to handle task completion
    function completeTask(taskIndex) {
        const currentLevel = levels[currentLevelIndex];
        if (!currentLevel.tasks[taskIndex].isCompleted) {
            currentLevel.tasks[taskIndex].isCompleted = true;
            renderLevel();
            checkLevelCompletion();
            const message = currentLevel.taskCompleteMessages[taskIndex] || "‡¶ï‡¶æ‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶≠‡¶ø‡¶∏‡¶æ‡¶∞ ‡¶è‡¶ï ‡¶ß‡¶æ‡¶™ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶ö‡¶≤‡ßá ‡¶è‡¶∏‡ßá‡¶õ‡ßá‡¶®‡•§";
            showNotification('‡¶ï‡¶æ‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!', message);
        }
    }

    // Function to render the current level's content
    function renderLevel() {
        const currentLevel = levels[currentLevelIndex];
        const currentGeminiFeatures = geminiFeatures[currentLevelIndex];

        levelTitle.textContent = currentLevel.title;
        levelDescription.textContent = currentLevel.description;
        taskList.innerHTML = '';
        
        currentLevel.tasks.forEach((task, index) => {
            const li = document.createElement('li');
            li.className = 'task-item';
            if (task.isCompleted) {
                li.classList.add('completed');
            }
            
            const taskTextSpan = document.createElement('span');
            taskTextSpan.className = 'task-text';
            taskTextSpan.textContent = task.text;
            li.appendChild(taskTextSpan);

            // Add info button if it exists
            if (task.infoAction) {
                const infoBtn = document.createElement('button');
                infoBtn.className = 'complete-button';
                infoBtn.textContent = task.infoAction.label;
                infoBtn.style.backgroundColor = '#17a2b8'; // Info color
                infoBtn.style.marginRight = '10px';
                infoBtn.onclick = () => {
                    showNotification(task.infoAction.label, task.infoAction.message);
                };
                li.appendChild(infoBtn);
            }
            
            let actionBtn;
            if (task.specialAction === 'generateItinerary') {
                actionBtn = document.createElement('button');
                actionBtn.className = 'complete-button ai-button';
                actionBtn.textContent = '‚ú® ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®';
                actionBtn.disabled = task.isCompleted;
                actionBtn.onclick = () => {
                    aiModal.style.display = 'flex';
                };
            } else {
                actionBtn = document.createElement('button');
                actionBtn.className = 'complete-button';
                actionBtn.textContent = task.isCompleted ? '‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£!' : '‡¶ï‡¶æ‡¶ú ‡¶∂‡ßá‡¶∑';
                actionBtn.disabled = task.isCompleted;
                actionBtn.onclick = () => completeTask(index);
            }
            
            li.appendChild(actionBtn);
            taskList.appendChild(li);
        });

        // Update dynamic buttons
        if (currentGeminiFeatures) {
            dynamicBtn1.textContent = `‚ú® ${currentGeminiFeatures.title1}`;
            dynamicBtn1.onclick = () => {
                dynamicModalTitle.textContent = currentGeminiFeatures.title1;
                handleDynamicFeature(currentGeminiFeatures.prompt1, `${currentGeminiFeatures.title1} ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶ö‡ßç‡¶õ‡ßá...`);
            };

            dynamicBtn2.textContent = `‚ú® ${currentGeminiFeatures.title2}`;
            dynamicBtn2.onclick = () => {
                dynamicModalTitle.textContent = currentGeminiFeatures.title2;
                handleDynamicFeature(currentGeminiFeatures.prompt2, `${currentGeminiFeatures.title2} ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶ö‡ßç‡¶õ‡ßá...`);
            };
        }

        updateProgressBar();
        checkLevelCompletion();
        displayRandomFact();
    }
    
    // Function to copy text to clipboard
    function copyTextToClipboard(text) {
        // Use a temporary textarea to hold the text to copy
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        showNotification('‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!', '‡¶≤‡ßá‡¶ñ‡¶æ‡¶ü‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡ßç‡¶≤‡¶ø‡¶™‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§');
    }

    // Event listener for the new "Complete Itinerary" button
    completeItineraryBtn.addEventListener('click', () => {
        // The itinerary task is the 4th task in the array (index 3)
        completeTask(3); 
        closeAiModal();
    });
    
    // Event listener for the "Copy" buttons
    copyItineraryBtn.addEventListener('click', () => {
        copyTextToClipboard(aiResponseArea.textContent);
    });

    copyDynamicBtn.addEventListener('click', () => {
        copyTextToClipboard(dynamicResponseArea.textContent);
    });


    // Function to check if all tasks in a level are completed
    function checkLevelCompletion() {
        const currentLevel = levels[currentLevelIndex];
        if (currentLevel && currentLevel.tasks.every(task => task.isCompleted)) {
            currentLevel.isCompleted = true;
            nextLevelBtn.style.display = 'block';
            const message = currentLevel.levelUpMessage;
            showNotification('‡¶ï‡ßç‡¶∑‡¶Æ‡¶§‡¶æ ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!', message);
        } else {
            nextLevelBtn.style.display = 'none';
        }
    }

    // Function to move to the next level
    function nextLevel() {
        if (currentLevelIndex < levels.length - 1) {
            currentLevelIndex++;
            renderLevel();
            nextLevelBtn.style.display = 'none';
        } else {
            showVictoryScreen();
        }
    }

    // Function to show the victory screen
    function showVictoryScreen() {
        levelScreen.style.display = 'none';
        victoryScreen.style.display = 'block';
        progressBar.style.width = '100%';
        showNotification('‡¶π‡ßã‡¶Æ ‡¶∞‡¶æ‡¶®!', '‡¶Ü‡¶™‡¶®‡¶ø ‡¶≠‡¶ø‡¶∏‡¶æ ‡¶™‡ßá‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡¶®! ‡¶â‡¶¶‡ßÄ‡¶Ø‡¶º‡¶Æ‡¶æ‡¶® ‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡¶•‡ßá ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
    }

    // Event listener for the next level button
    nextLevelBtn.addEventListener('click', nextLevel);

    // Event listener for the intro form submission
    userInfoForm.addEventListener('submit', function(event) {
        // 1. Prevent the default form submission behavior which reloads the page
        event.preventDefault();

        // 2. Get user data from the form fields
        userName = document.getElementById('user-name').value;
        userEmail = document.getElementById('user-email').value;

        // Optional: Submit to Formspree in the background without leaving the page
        const formData = new FormData(userInfoForm);
        fetch(userInfoForm.action, {
            method: 'POST',
            body: formData,
            headers: {
                'Accept': 'application/json'
            }
        }).then(response => {
            if (response.ok) {
                console.log('Form data successfully sent to Formspree.');
            } else {
                 console.error('Failed to send form data to Formspree.');
            }
        }).catch(error => {
            console.error('Error submitting form to Formspree:', error);
        });

        // 3. Hide the introductory form
        introFormDiv.style.display = 'none';
        
        // 4. Show the main game area
        gameMainDiv.style.display = 'block';
        
        // 5. Render the first level to officially start the game
        renderLevel();
    });

    // Initial game setup
    window.onload = function() {
        // Show the intro form and hide the game when the page first loads
        introFormDiv.style.display = 'block';
        gameMainDiv.style.display = 'none';
    };
</script>
</body>
</html>
